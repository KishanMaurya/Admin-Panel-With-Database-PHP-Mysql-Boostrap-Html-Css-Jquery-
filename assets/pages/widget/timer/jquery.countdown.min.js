/*! countdown - v - 2014-08-20
* https://github.com/amibug/countdown
* Copyright (c) 2014 ; Licensed MIT */
!function(a){a.countdown=function(b,c){var d={version:"@version",diff:null,year:0,month:0,day:0,hour:1,min:1,sec:1,refresh:1e3,easing:"linear",dash:[{key:"year",duration:950},{key:"day",duration:950},{key:"hour",duration:950},{key:"min",duration:950},{key:"sec",duration:750}],onEnd:a.noop},e=this;e.settings={};var f=a(b),b=b;e.init=function(){var b=f.find(".digit");return b.html('<div class="top"></div><div class="bottom"></div>'),this.settings=a.extend({},d,c),this._doCountDown(),this},e.start=function(){return this.interval||this._doCountDown(),this},e.stop=function(){return this.interval&&clearInterval(this.interval),this.interval=null,this},e.update=function(b){return null==b.diff&&(b.diff=null),this.settings=a.extend({},this.settings,b),this},e._caluate=function(b){var c,d,e=new Date,f={};if("number"===a.type(b.diff))d=b.diff;else try{e.setFullYear(b.year+e.getFullYear()),e.setMonth(b.month+e.getMonth()),e.setDate(b.day+e.getDate()),e.setHours(b.hour+e.getHours()),e.setMinutes(b.min+e.getMinutes()),e.setSeconds(b.sec+e.getSeconds()),c=new Date,d=Math.floor((e.valueOf()-c.valueOf())/1e3)}catch(g){throw"The date parameter is invalidate!"}return this.settings.diff=d,d>=31557600&&(f.year=Math.floor(d/31557600),d-=365.25*f.year*86400),d>=86400&&(f.day=Math.floor(d/86400),d-=86400*f.day),d>=3600&&(f.hour=Math.floor(d/3600),d-=3600*f.hour),d>=60&&(f.min=Math.floor(d/60),d-=60*f.min),f.sec=d,f},e._doCountDown=function(){var a=this.settings.dash,b=this._caluate(this.settings),c=this;if(this.settings.diff<0)return this.stop(),this.settings.onEnd.apply(this),this;this.settings.diff=this.settings.diff-this.settings.refresh/1e3;for(var d=0,e=a.length;e>d;d++)for(var g=f.find("."+a[d].key+"_dash .digit"),h=b[a[d].key],i=g.length-1;i>=0;i--){var j=h%10;h=(h-j)/10,this._render(g.eq(i),j,a[d].duration)}this.interval||(this.interval=setInterval(function(){return c._doCountDown()},this.settings.refresh))},e._render=function(b,c,d){var e=a(b).find(".top"),f=a(b).find(".bottom");c=c||0,d||(d=750),e.html()!=c+""&&(e.css({display:"none"}).html(c?c:"0").slideDown(d),f.animate({height:""},d,function(){a(this).html(e.html()).css({display:"block",height:""}),e.hide().slideUp(10)}))},e.init()},a.fn.countdown=function(b){return this.each(function(){if(void 0==a(this).data("countdown")){var c=new a.countdown(this,b);a(this).data("countdown",c)}})}}(jQuery,window,void 0);